#include <ros.h>
#include <std_msgs/Int8.h>

#define relay_pin 8

ros::NodeHandle  nh;

void messageCb( const std_msgs::Int8& relay_msg){
      int val = relay_msg.data;
      if(val == 1){
        
        digitalWrite(relay_pin, LOW);
        }
      else{
        
        digitalWrite(relay_pin,HIGH);
       }
      delay(100);
}

ros::Subscriber<std_msgs::Int8> sub("relay", messageCb);

void setup()
{ 
  pinMode(relay_pin, OUTPUT);
  digitalWrite(relay_pin, HIGH);
  nh.initNode();
  nh.subscribe(sub);
}

void loop()
{  
  nh.spinOnce();
  delay(1);
}

